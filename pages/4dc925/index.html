<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>第七章 函数表达式 | Aohonze&#39;s Blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/img/favicon.ico">
    <script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" async="async"></script>
    <meta name="description" content="">
    <link rel="preload" href="/assets/css/0.styles.0af83f91.css" as="style"><link rel="preload" href="/assets/js/app.bd914b06.js" as="script"><link rel="preload" href="/assets/js/2.86577ad8.js" as="script"><link rel="preload" href="/assets/js/3.6ba828b2.js" as="script"><link rel="preload" href="/assets/js/20.b8fe3286.js" as="script"><link rel="prefetch" href="/assets/js/10.b94bd625.js"><link rel="prefetch" href="/assets/js/11.99d7d9cd.js"><link rel="prefetch" href="/assets/js/12.ce4e3625.js"><link rel="prefetch" href="/assets/js/13.ac2dd7ba.js"><link rel="prefetch" href="/assets/js/14.fe7e428a.js"><link rel="prefetch" href="/assets/js/15.86195e09.js"><link rel="prefetch" href="/assets/js/16.93585e10.js"><link rel="prefetch" href="/assets/js/17.999fd5c1.js"><link rel="prefetch" href="/assets/js/18.5c47f29e.js"><link rel="prefetch" href="/assets/js/19.1c482664.js"><link rel="prefetch" href="/assets/js/21.21888a93.js"><link rel="prefetch" href="/assets/js/22.1e2613bf.js"><link rel="prefetch" href="/assets/js/23.81029711.js"><link rel="prefetch" href="/assets/js/24.4977bb1d.js"><link rel="prefetch" href="/assets/js/25.43be3e68.js"><link rel="prefetch" href="/assets/js/26.7a91708c.js"><link rel="prefetch" href="/assets/js/27.3ad8503a.js"><link rel="prefetch" href="/assets/js/28.b3fc7815.js"><link rel="prefetch" href="/assets/js/29.bdf27ec9.js"><link rel="prefetch" href="/assets/js/30.6f0b5fee.js"><link rel="prefetch" href="/assets/js/31.4113abe8.js"><link rel="prefetch" href="/assets/js/32.efab89ed.js"><link rel="prefetch" href="/assets/js/33.6535864b.js"><link rel="prefetch" href="/assets/js/34.8d2153d1.js"><link rel="prefetch" href="/assets/js/35.4dd03cb0.js"><link rel="prefetch" href="/assets/js/36.fdf7160d.js"><link rel="prefetch" href="/assets/js/37.c929eb26.js"><link rel="prefetch" href="/assets/js/38.d0411b7b.js"><link rel="prefetch" href="/assets/js/39.bcc37a19.js"><link rel="prefetch" href="/assets/js/4.aff7980e.js"><link rel="prefetch" href="/assets/js/40.a692a085.js"><link rel="prefetch" href="/assets/js/41.c369d40d.js"><link rel="prefetch" href="/assets/js/5.ae5203f6.js"><link rel="prefetch" href="/assets/js/6.283a0e9c.js"><link rel="prefetch" href="/assets/js/7.87e7f6a8.js"><link rel="prefetch" href="/assets/js/8.1fe7aa90.js"><link rel="prefetch" href="/assets/js/9.a5f14444.js">
    <link rel="stylesheet" href="/assets/css/0.styles.0af83f91.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container sidebar-open have-rightmenu"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">Aohonze's Blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/blog/" class="nav-link">BLOG</a></div><div class="nav-item"><a href="/categories/" class="nav-link">CATEGORIES</a></div><div class="nav-item"><a href="/tools/" class="nav-link">TOOLS</a></div><div class="nav-item"><a href="/about/" class="nav-link">ABOUT</a></div><div class="nav-item"><a href="https://github.com/Aohonze/Aohonze.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="https://cdn.jsdelivr.net/gh/tyrone-wu/PicRepo/tyrone.jpg"> <div class="blogger-info"><h3>Aohonze</h3> <span>微信公众号：达哥的号</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">HOME</a></div><div class="nav-item"><a href="/blog/" class="nav-link">BLOG</a></div><div class="nav-item"><a href="/categories/" class="nav-link">CATEGORIES</a></div><div class="nav-item"><a href="/tools/" class="nav-link">TOOLS</a></div><div class="nav-item"><a href="/about/" class="nav-link">ABOUT</a></div><div class="nav-item"><a href="https://github.com/Aohonze/Aohonze.github.io" target="_blank" rel="noopener noreferrer" class="nav-link external">
  GITHUB
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>算法</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>笔记</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>JavaScript高级程序设计</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/f21a2a/" class="sidebar-link">第三章 JS 基础概念</a></li><li><a href="/pages/e49708/" class="sidebar-link">第四章 JS 变量、作用域和内存问题</a></li><li><a href="/pages/6058b4/" class="sidebar-link">第五章 引用类型</a></li><li><a href="/pages/7332b7/" class="sidebar-link">第六章 面向对象的程序设计</a></li><li><a href="/pages/4dc925/" aria-current="page" class="active sidebar-link">第七章 函数表达式</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/4dc925/#一、递归" class="sidebar-link">一、递归</a></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#二、闭包" class="sidebar-link">二、闭包</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/4dc925/#_1-闭包与变量" class="sidebar-link">1.闭包与变量</a></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#_2-this-对象" class="sidebar-link">2.this 对象</a></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#_3-内存泄漏" class="sidebar-link">3.内存泄漏</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#三、模仿块级作用域" class="sidebar-link">三、模仿块级作用域</a></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#四、私有变量" class="sidebar-link">四、私有变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/4dc925/#_1-静态私有变量" class="sidebar-link">1.静态私有变量</a></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#_2-模块模式" class="sidebar-link">2.模块模式</a></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#_3-增强的模块模式" class="sidebar-link">3.增强的模块模式</a></li></ul></li><li class="sidebar-sub-header"><a href="/pages/4dc925/#小结" class="sidebar-link">小结</a></li></ul></li></ul></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>面经</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>其他</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper "><div class="articleInfo-wrap" data-v-786ef3cb><div class="articleInfo" data-v-786ef3cb><ul class="breadcrumbs" data-v-786ef3cb><li data-v-786ef3cb><a href="/" title="首页" class="iconfont icon-home router-link-active" data-v-786ef3cb></a></li> <li data-v-786ef3cb><a href="/blog/" title="blog-目录页" data-v-786ef3cb>blog</a></li> <li data-v-786ef3cb><a href="/blog//#笔记" title="blog#笔记" data-v-786ef3cb>笔记</a></li> <li data-v-786ef3cb><a href="/blog//#JavaScript高级程序设计" title="blog#JavaScript高级程序设计" data-v-786ef3cb>JavaScript高级程序设计</a></li></ul> <div class="info" data-v-786ef3cb><div title="作者" class="author iconfont icon-touxiang" data-v-786ef3cb><a href="https://github.com/Tyrone-Wu" target="_blank" title="作者" class="beLink" data-v-786ef3cb>Aohonze</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-786ef3cb><a href="javascript:;" data-v-786ef3cb>2020-04-09</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABGpJREFUSA3tVVtoXFUU3fvOI53UlmCaKIFmwEhsE7QK0ipFEdHEKpXaZGrp15SINsXUWvBDpBgQRKi0+KKoFeJHfZA+ED9KKoIU2gYD9UejTW4rVIzm0VSTziPzuNu1z507dibTTjL4U/DAzLn3nL3X2o91ziX6f9wMFdh6Jvbm9nNSV0msViVO6tN1Rm7NMu2OpeJ9lWBUTDxrJbYTS0hInuwciu9eLHlFxCLCZEk3MegsJmZ5K/JD6t7FkFdEvGUo1g7qJoG3MHImqRIn8/nzY1K9UPKKiJmtnUqHVE3Gbuay6vJE/N2FEmuxFjW2nUuE0yQXRRxLiTUAzs36zhZvOXJPdX850EVnnLZkB8prodQoM5JGj7Xk2mvC7JB8tG04Ef5PiXtG0UtxupRQSfTnBoCy554x18yJHI6I+G5Eru4LHmPJZEQsrvPUbMiA8G/WgMK7w7I+ez7++o2ANfbrjvaOl1tFMs+htG3IrZH9/hDX1Pr8Tc0UvH8tcX29KzAgIGcEkINyW5BF9x891hw6VYqgJHEk0huccS7vh3C6gTiODL+26huuBtbct8eZnqLML8PkxGYpuPZBqtqwkSjgc4mB5gbgig5i+y0UDK35LMxXisn9xQtK+nd26gTIHsHe/oblK/b29fUmN/8Y+9jAQrnBp56m1LcDlDp9irKTExSKduXJVWSqdBMA08pEJnEIOB3FPPMybu/oeV8zFeYN3xx576Q6RH+VmplE4ncQV5v+5rzSoyOU7PuEAg8g803PwBJ0CExno/jcMbN8tONYeOmHiuUNryvm3fRUy4tMPVLdAGkUhNWuggGrJcXPv+ouCjz0MKUHz1J2/E8IC9nqTabcxgaBYM0hPhD5Y65FsbxRQKxCQrDjDctW7PUM3HuZunFyifSAqEfuzCp48Il24luWUWZoyJCaPR82jE0+kFA643wRFVni4RYSq3ohJO2pZ7B5dO4xkDWbEpossJPLSrPjYID8rS2UHTlvyNxqIGsg674XJJ7vnh5L7PNwC4hh2sjCI96mzszOTpxLF0T7l88Yz7lAuK6OnL8gXLOnTvpzSb22YG8W7us3jSebFHeeqnXRG1vt+MoUM84LQIBmMsCTAcOauTh0T0l0neQK7m2bLMt2mGxU3HYssS0J2cdv5wljlPsrIuZLAG/2DOZIXgCYT8uMGZN+e2kSirfxZOPCsC0f24nTZzspnVn9VePS1Z5vubmAGGXG8ZFno9Hel0yfA5ZPhF7Dh972BQJ2qCpgH67lmWtBYbvk6sz02wjky2vXyz0XErP/kFB619js1BtwfOV4OPRqOQBjy3Qbk18vigUPPSD5ceHnwck7W9bhAqZdd7SuG7w4/P2F/GaJh8c7e9qgow+Q7cGBo+98WsLkuktFqiZabtXuQTu/Y5ETbR0v7tNSFnvrmu6pjdoan2KjMu8q/Hmj1EfCO2ZGfEIbIXKUlw8qaX9/b2oeSJmFksSeT/Fn0V3nSypChh4Gjh74ybO9aeZ/AN2dwciu2/MhAAAAAElFTkSuQmCC">
          第七章 函数表达式
        </h1> <!----> <div class="theme-vdoing-content content__default"><h1 id="第七章-函数表达式"><a href="#第七章-函数表达式" class="header-anchor">#</a> 第七章 函数表达式</h1> <h3 id="前言"><a href="#前言" class="header-anchor">#</a> 前言</h3> <p>本系列是在学习 JS 的过程中所做的读书笔记，将重点知识提取出来在闲暇时刻翻阅，如果你看过这本书，那收藏起来当复习用；如果你没看过这本书，那还犹豫啥，收藏起来抱佛脚用的啦~~~</p> <blockquote><p>注：内容摘抄或总结自《JavaScript 高级程序设计》第三到七章</p></blockquote> <hr> <p>定义函数的方式有两种：一种是函数声明，另一种就是函数表达式。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">//声明式</span>
<span class="token keyword">function</span> <span class="token function">fnName</span><span class="token punctuation">(</span><span class="token parameter">arg0<span class="token punctuation">,</span> arg1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//函数体</span>
<span class="token punctuation">}</span>

<span class="token comment">//函数表达式</span>
<span class="token keyword">var</span> <span class="token function-variable function">fnName</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">arg0<span class="token punctuation">,</span> arg1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//函数体</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>函数声明提升</strong>:是在执行 代码之前会先读取函数声明。这就意味着可以把函数声明放在调用它的语句后面。</p> <p><strong>匿名函数</strong>：函数表达式创建函数情况下创建的函数叫做匿名函数（anonymous function），因为 function 关键字后面没有标识符。</p> <h2 id="一、递归"><a href="#一、递归" class="header-anchor">#</a> 一、递归</h2> <p>递归函数是在一个函数通过名字调用自身的情况下构成的。</p> <h2 id="二、闭包"><a href="#二、闭包" class="header-anchor">#</a> 二、闭包</h2> <p>闭包是指有权访问另一个 函数作用域中的变量的函数。</p> <p>当某个函数被调用时，会创建一个执行环境（execution context）及相应的作用域链。 然后，使用 arguments 和其他命名参数的值来初始化函数的活动对象（activation object）。但在作用域 链中，外部函数的活动对象始终处于第二位，外部函数的外部函数的活动对象处于第三位，……直至作为作用域链终点的全局执行环境。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token parameter">value1<span class="token punctuation">,</span> value2</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">if</span> <span class="token punctuation">(</span>value1 <span class="token operator">&lt;</span> value2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>value1 <span class="token operator">&gt;</span> value2<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">1</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token keyword">var</span> result <span class="token operator">=</span> <span class="token function">compare</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>上述代码执行过程中产生的作用域链示意图：
<img src="https://user-gold-cdn.xitu.io/2020/3/1/1709650d684c1c90?w=706&amp;h=278&amp;f=png&amp;s=32777" alt=""></p> <p>当调用 compare()时，会创建一个包含 arguments、value1 和 value2 的活动对象。全局执行环境的变量对象（包含 result 和 compare）在 compare()执行环境的作用域链中则处于第二位。</p> <p>匿名函数从外层函数返回后，其作用域链被初始化为包含外层函数的活动对象和全局变量对象。这样匿名函数可以访问外层函数中定义的变量。</p> <p>外层函数执行完毕之后，其执行环境的作用域链会被销毁，但是其活动对象任然保留在内存之中，直到匿名函数被销毁之后，外层函数的活动对象才会被销毁。</p> <blockquote><p>由于闭包会携带包含它的函数的作用域，因此会比其他函数占用更多的内存。过度使用闭包可能会导致内存占用过多。</p></blockquote> <h3 id="_1-闭包与变量"><a href="#_1-闭包与变量" class="header-anchor">#</a> 1.闭包与变量</h3> <p>作用域链的这种配置机制引出了一个值得注意的副作用，即闭包只能取得包含函数中任何变量的后一个值。</p> <p>我们可以通过创建另一个匿名函数强制让闭包的行为 符合预期</p> <h3 id="_2-this-对象"><a href="#_2-this-对象" class="header-anchor">#</a> 2.this 对象</h3> <ul><li><p>this 对象是在运行时基于函数的执 行环境绑定的：在全局函数中，this 等于 window，而当函数被作为某个对象的方法调用时，this 等 于那个对象。</p></li> <li><p>匿名函数的执行环境具有全局性，因此其 this 对象通常指向 window。</p></li> <li><p>每个函数在被调用时都会自动取得两个特殊变量：this 和 arguments。内部函数在搜索这两个变量时，<strong>只会搜索到其活动对象为止</strong>，因此永远不可能直接访问外部函数中的这两个变量。</p></li> <li><p>把外部作用域中的 this 对象保存在一个闭包能够访问 到的变量里，就可以让闭包访问该对象了,对于 arguments 也是同样的道理。</p></li></ul> <h3 id="_3-内存泄漏"><a href="#_3-内存泄漏" class="header-anchor">#</a> 3.内存泄漏</h3> <ul><li><p>如果闭包的作用域链中保存着一个 HTML 元素，那么就意味着该元素将无法被销毁。</p></li> <li><p>把 element 变量设置为 null。这样就能够解除对 DOM 对象的引 用，顺利地减少其引用数，确保正常回收其占用的内存。</p></li></ul> <h2 id="三、模仿块级作用域"><a href="#三、模仿块级作用域" class="header-anchor">#</a> 三、模仿块级作用域</h2> <p>JavaScript 没有块级作用域的概念。这意味着在块语句中定义的变量，实际上是在包含函数中而非语句中创建的。</p> <p>所以在 JAVA、C++等语言中，函数中定义 for 循环时里面的 i 只在循环内部有效，但是在 js 当中由于是创建在函数中，所以在函数的其他地方依然可以调用。</p> <blockquote><p>当然，上面所述的情况，在 ES6 之后就用 Let 完美解决。</p></blockquote> <ul><li>JavaScript 从来不会告诉你是否多次声明了同一个变量；遇到这种情况，它只会对后续的声明视而不 见（不过，它会执行后续声明中的变量初始化）。</li> <li>JavaScript 将 function 关键字当作一个函数声明的开始，而函数声明后面不能跟圆括号。</li> <li>函数表达式的后面可以跟圆括号。要将函数声明转换成函数表达式， 只要加上一对圆括号即可。</li> <li>这种做法可以减少闭包占用的内存问题，因为没有指向匿名函数的引用。只要函数执行完毕，就可以立即销毁其作用域链了。</li></ul> <h2 id="四、私有变量"><a href="#四、私有变量" class="header-anchor">#</a> 四、私有变量</h2> <ul><li>严格来讲，JavaScript 中没有私有成员的概念；所有对象属性都是公有的。</li> <li>任何在函数中定义的变量，都可以认为是私有变量，因为不能在函数的外部访问这些变量。私有变量包括函数的参数、局部变量和在函数内部定义的其他函数。</li> <li>把有权访问私有变量和私有函数的公有方法称为特权方法（privileged method）。有两种在对象 上创建特权方法的方式。第一种是在构造函数中定义特权方法；另一种是用静态私有变量来实现特权方法。</li></ul> <h3 id="_1-静态私有变量"><a href="#_1-静态私有变量" class="header-anchor">#</a> 1.静态私有变量</h3> <ul><li>初始化未经声明的变量，总是会创建一个全局变量。在严格模式下 给未经声明的变量赋值会导致错误。</li> <li>在函数内部创建全局对象，通过对象原型方式定义特权方法，由于对象是全局的，可以在任何地方引用。</li></ul> <h3 id="_2-模块模式"><a href="#_2-模块模式" class="header-anchor">#</a> 2.模块模式</h3> <ul><li>单例（singleton）指的就是只有一个实例的对象。按照惯例，JavaScript 是以对象字面量的方式来创建单例对象的。</li> <li>如果必须创建一个对象并以某些数据对其进行初始化，同时还要公开一些能够访问这些私有 数据的方法，那么就可以使用模块模式。</li> <li>单例通常都是作为全局对象存在的，我们不 会将它传递给一个函数。也就没有什么必要使用 instanceof 操作符来检查其对象类型了。</li></ul> <h3 id="_3-增强的模块模式"><a href="#_3-增强的模块模式" class="header-anchor">#</a> 3.增强的模块模式</h3> <p>-这种增强的模块模式适合那 些单例必须是某种类型的实例，同时还必须添加某些属性和（或）方法对其加以增强的情况。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> singleton <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">//私有变量和私有函数</span>
	<span class="token keyword">var</span> privateVariable <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span>
	<span class="token keyword">function</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">return</span> <span class="token boolean">false</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span>
	<span class="token comment">//创建对象</span>
	<span class="token keyword">var</span> object <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CustomType</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token comment">//添加特权/公有属性和方法</span>
	object<span class="token punctuation">.</span>publicProperty <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
	object<span class="token punctuation">.</span><span class="token function-variable function">publicMethod</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
		privateVariable<span class="token operator">++</span><span class="token punctuation">;</span>
		<span class="token keyword">return</span> <span class="token function">privateFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token punctuation">}</span><span class="token punctuation">;</span>
	<span class="token comment">//返回这个对象</span>
	<span class="token keyword">return</span> object<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>在 JavaScript 编程中，函数表达式是一种非常有用的技术。使用函数表达式可以无须对函数命名，从而实现动态编程。匿名函数，也称为拉姆达函数，是一种使用 JavaScript 函数的强大方式。以下总结了函数表达式的特点。</p> <ul><li>函数表达式不同于函数声明。函数声明要求有名字，但函数表达式不需要。没有名字的函数表达式也叫做匿名函数。</li> <li>在无法确定如何引用函数的情况下，递归函数就会变得比较复杂；</li> <li>递归函数应该始终使用 arguments.callee 来递归地调用自身，不要使用函数名——函数名可能会发生变化。</li></ul> <p>当在函数内部定义了其他函数时，就创建了闭包。闭包有权访问包含函数内部的所有变量，原理如下。</p> <ul><li>在后台执行环境中，闭包的作用域链包含着它自己的作用域、包含函数的作用域和全局作用域。</li> <li>通常，函数的作用域及其所有变量都会在函数执行结束后被销毁。</li> <li>但是，当函数返回了一个闭包时，这个函数的作用域将会一直在内存中保存到闭包不存在为止。</li></ul> <p>使用闭包可以在 JavaScript 中模仿块级作用域（JavaScript 本身没有块级作用域的概念），要点如下。</p> <ul><li>创建并立即调用一个函数，这样既可以执行其中的代码，又不会在内存中留下对该函数的引用。</li> <li>结果就是函数内部的所有变量都会被立即销毁——除非将某些变量赋值给了包含作用域（即外 部作用域）中的变量。</li></ul> <p>闭包还可以用于在对象中创建私有变量，相关概念和要点如下。</p> <ul><li>即使 JavaScript 中没有正式的私有对象属性的概念，但可以使用闭包来实现公有方法，而通过公有方法可以访问在包含作用域中定义的变量。</li> <li>有权访问私有变量的公有方法叫做特权方法。</li> <li>可以使用构造函数模式、原型模式来实现自定义类型的特权方法，也可以使用模块模式、增强 的模块模式来实现单例的特权方法。</li></ul> <p>JavaScript 中的函数表达式和闭包都是极其有用的特性，利用它们可以实现很多功能。不过，因为创建闭包必须维护额外的作用域，所以过度使用它们可能会占用大量内存。</p> <p>恭喜你读完本章节！作为 JS 的基础内容学习!本系列的文章先告一段落啦！我读完之后感觉醍醐灌顶！你呢？？？ 哈哈哈！继续加油！</p></div></div> <!----> <div class="page-edit"><!----> <div class="tags"><a href="/tags/?tag=%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0" title="标签">#读书笔记</a></div> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">3/25/2021, 11:42:39 PM</span></div></div> <div class="page-nav-wapper"><div class="page-nav-centre-wrap"><a href="/pages/7332b7/" class="page-nav-centre page-nav-centre-prev"><div class="tooltip">第六章 面向对象的程序设计</div></a> <a href="/pages/a88295/" class="page-nav-centre page-nav-centre-next"><div class="tooltip">面试知识点整理 -- HTML篇</div></a></div> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/pages/7332b7/" class="prev">第六章 面向对象的程序设计</a></span> <span class="next"><a href="/pages/a88295/">面试知识点整理 -- HTML篇</a>→
      </span></p></div></div></div> <div class="article-list"><div class="article-title"><a href="/archives/" class="iconfont icon-bi">最近更新</a></div> <div class="article-wrapper"><dl><dd>01</dd> <dt><a href="/pages/652ede0d7b81bbfb/"><div>二叉树篇</div></a> <span>07-12</span></dt></dl><dl><dd>02</dd> <dt><a href="/pages/bdeaf690864ba462/"><div>网站收藏</div></a> <span>06-11</span></dt></dl><dl><dd>03</dd> <dt><a href="/pages/dd05fd/"><div>面试官问你的 Express 框架中间件你还没懂？</div></a> <span>06-05</span></dt></dl> <dl><dd></dd> <dt><a href="/archives/" class="more">
          更多文章&gt;
        </a></dt></dl></div></div></main></div> <div class="footer"><div class="icons"><a href="mailto:1161763410@qq.com" title="发邮件" target="_blank" class="iconfont icon-youjian"></a><a href="https://github.com/Aohonze" title="GitHub" target="_blank" class="iconfont icon-github"></a><a href="https://music.163.com/#/playlist?id=755597173" title="听音乐" target="_blank" class="iconfont icon-erji"></a></div> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2020-2021
    <span>Tyrone-Wu | MIT License</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-rijianmoshi"></li><li class="iconfont icon-yejianmoshi"></li></ul></div></div> <!----> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.bd914b06.js" defer></script><script src="/assets/js/2.86577ad8.js" defer></script><script src="/assets/js/3.6ba828b2.js" defer></script><script src="/assets/js/20.b8fe3286.js" defer></script>
  </body>
</html>